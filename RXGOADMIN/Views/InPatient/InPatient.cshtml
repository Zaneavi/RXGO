@model RXGOADMIN.Models.InPatient
@{
    ViewBag.Title = "InPatient";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="page-breadcrumb">
    <div class="row">
        <div class="col-12 d-flex no-block align-items-center">
            <h4 class="page-title">
                IPD Patient
            </h4>
            <div class="ml-auto text-right">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/Employees">Home</a></li>
                        <li class="breadcrumb-item">
                            <a href="javascript:(void);">
                                IPD Patient
                            </a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">
                            IPD Patient
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid">

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div style="text-align:right;margin-top: 8px;margin-right: 10px;">
                    <a data-toggle="modal" data-target="#myModal" class="btn btn-primary btn-sm charge" style="background-color: #2196f3;border-color:#2196f3;color:#fff;">
                        <i class="fa fa-plus"></i>  Add Patient
                    </a>
                    <a data-toggle="modal" data-target="#myModal" class="btn btn-primary btn-sm charge" style="background-color: #2196f3;border-color:#2196f3;color:#fff;"><i class="fa fa-reorder"></i> Discharged Patient</a>
                </div>

                <div class="card-body">
                    <div class="table-responsive">
                        <div id="zero_config_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap4">
                            <div class="row"><div class="col-sm-12 col-md-6"><div class="dataTables_length" id="zero_config_length"><label>Show <select name="zero_config_length" aria-controls="zero_config" class="form-control form-control-sm"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div></div><div class="col-sm-12 col-md-6"><div id="zero_config_filter" class="dataTables_filter"><label>Search:<input type="search" class="form-control form-control-sm" placeholder="" aria-controls="zero_config"></label></div></div></div><div class="row">
                                <div class="col-sm-12">
                                    <table id="zero_config" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="zero_config_info">
                                        <thead>
                                            <tr role="row"><th class="sorting_asc" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 83px;">Name</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="IPD No: activate to sort column ascending" style="width: 47px;">IPD No</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Patient Id: activate to sort column ascending" style="width: 83px;">Patient Id</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Gender: activate to sort column ascending" style="width: 46px;">Gender</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Phone: activate to sort column ascending" style="width: 70px;">Phone</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Consultant: activate to sort column ascending" style="width: 68px;">Consultant</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Bed: activate to sort column ascending" style="width: 73px;">Bed</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Charges($): activate to sort column ascending" style="width: 38px;">Charges</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Payment($): activate to sort column ascending" style="width: 41px;">Payment</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Due Payment($): activate to sort column ascending" style="width: 41px;">Due Payment</th><th class="sorting" tabindex="0" aria-controls="zero_config" rowspan="1" colspan="1" aria-label="Credit Limit($): activate to sort column ascending" style="width: 41px;">Credit Limit</th></tr>
                                        </thead>
                                        <tbody>

                                            <tr role="row" class="odd">

                                                <td class="sorting_1">Test1</td>
                                                <td>2</td>
                                                <td>Test</td>
                                                <td>Male</td>
                                                <td>7699099049</td>
                                                <td>Test2</td>
                                                <td>test</td>
                                                <td>2</td>
                                                <td>2</td>
                                                <td>2</td>
                                                <td>
                                                    2 <a href="/Patient/profile/4" class="btn btn-default btn-xs" data-toggle="tooltip" title="" data-original-title="Show"><i class="fa fa-reorder" aria-hidden="true"></i></a>
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr><th rowspan="1" colspan="1">Name</th><th rowspan="1" colspan="1">IPD No</th><th rowspan="1" colspan="1">Patient Id</th><th rowspan="1" colspan="1">Gender</th><th rowspan="1" colspan="1">Phone</th><th rowspan="1" colspan="1">Consultant</th><th rowspan="1" colspan="1">Bed</th><th rowspan="1" colspan="1">Charges</th><th rowspan="1" colspan="1">Payment</th><th rowspan="1" colspan="1">Due Payment</th><th rowspan="1" colspan="1">Credit Limit</th></tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div><div class="row"><div class="col-sm-12 col-md-5"><div class="dataTables_info" id="zero_config_info" role="status" aria-live="polite">Showing 1 to 1 of 1 entries</div></div><div class="col-sm-12 col-md-7"><div class="dataTables_paginate paging_simple_numbers" id="zero_config_paginate"><ul class="pagination"><li class="paginate_button page-item previous disabled" id="zero_config_previous"><a href="#" aria-controls="zero_config" data-dt-idx="0" tabindex="0" class="page-link">Previous</a></li><li class="paginate_button page-item active"><a href="#" aria-controls="zero_config" data-dt-idx="1" tabindex="0" class="page-link">1</a></li><li class="paginate_button page-item next disabled" id="zero_config_next"><a href="#" aria-controls="zero_config" data-dt-idx="2" tabindex="0" class="page-link">Next</a></li></ul></div></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                                                        <div class="modal-dialog modal-lg modalfullmobile" role="document">
                                                            <div class="modal-content modal-media-content">
                                                                <div class="modal-header modal-media-header">

                                                                    <div class="container">
                                                                        <div class="row">
                                                                            <div class="col-sm-6 col-xs-6">
                                                                                <div class="form-group15">
                                                                                    <div>
                                                                                        <select class="form-control select2-hidden-accessible" id="patient_list" name="PatientId" onchange="get_PatientDetails(this.value)" style="width: 100%;" tabindex="-1" aria-hidden="true">
                                                                                            <option value="">Select Patient</option>
                                                                                            <option value="4">DEBSANKAR DAS</option>
                                                                                        </select><span class="select2 select2-container select2-container--default" dir="ltr" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-patient_list-container"><span class="select2-selection__rendered" id="select2-patient_list-container" title="Select Patient">Select Patient</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                                                                    </div>
                                                                                    <span class="text-danger"></span>
                                                                                </div>
                                                                            </div><!--./col-sm-8-->
                                                                            <div class="col-sm-4 col-xs-5">
                                                                                <div class="form-group15">
                                                                                    <a data-toggle="modal" id="add" onclick="holdModal('myModalpa')" class="modalbtnpatient" style="display:table"><i class="fa fa-plus" style="color:#000;"></i>  <span style="color:#000;">New Patient</span></a>
                                                                                </div>
                                                                            </div><!--./col-sm-4-->
                                                                        </div><!-- ./row -->
                                                                    </div>
                                                                    <button type="button" class="close pt4" data-dismiss="modal">×</button>
                                                                </div>

                                                                <div class="modal-body pt0 pb0">
                                                                    <div class="row">
                                                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                                                            <form id="formadd" accept-charset="utf-8" action="/Patient/OPDPatient" enctype="multipart/form-data" method="post">
                                                                                <input name="PatientId" id="patient_id" type="hidden" class="form-control">
                                                                                <input name="Email" id="pemail" type="hidden" class="form-control">
                                                                                <input name="Phone" id="mobnumber" type="hidden" class="form-control">
                                                                                <input name="Name" id="patientname" type="hidden" class="form-control">
                                                                                <input name="password" id="password" type="hidden" class="form-control">

                                                                                <div class="row row-eq">
                                                                                    <div class="col-lg-8 col-md-8 col-sm-8">
                                                                                        <div id="ajax_load"></div>
                                                                                        <div class="row ptt10" id="patientDetails" style="display:none">
                                                                                            <div class="col-md-9 col-sm-9 col-xs-9">
                                                                                                <ul class="singlelist">
                                                                                                    <li class="singlelist24bold">
                                                                                                        <span id="listname"></span>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <i class="fas fa-user-secret" data-toggle="tooltip" data-placement="top" title="" data-original-title="Guardian"></i>
                                                                                                        <span id="guardian"></span>
                                                                                                    </li>
                                                                                                </ul>
                                                                                                <ul class="multilinelist">
                                                                                                    <li>
                                                                                                        <i class="fas fa-venus-mars" data-toggle="tooltip" data-placement="top" title="" data-original-title="Gender"></i>
                                                                                                        <span id="genders"></span>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <i class="fas fa-tint" data-toggle="tooltip" data-placement="top" title="" data-original-title="Blood Group"></i>
                                                                                                        <span id="blood_group"></span>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <i class="fa fa-life-ring" data-toggle="tooltip" data-placement="top" title="" data-original-title="Marital Status"></i>
                                                                                                        <span id="marital_status"></span>
                                                                                                    </li>
                                                                                                </ul>
                                                                                                <ul class="singlelist">
                                                                                                    <li>
                                                                                                        <i class="fas fa-hourglass-half" data-toggle="tooltip" data-placement="top" title="" data-original-title="Age"></i>
                                                                                                        <span id="age"></span>
                                                                                                    </li>

                                                                                                    <li>
                                                                                                        <i class="fa fa-phone-square" data-toggle="tooltip" data-placement="top" title="" data-original-title="Phone"></i>
                                                                                                        <span id="listnumber"></span>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <i class="fa fa-envelope" data-toggle="tooltip" data-placement="top" title="" data-original-title="Email"></i>
                                                                                                        <span id="email"></span>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <i class="fas fa-street-view" data-toggle="tooltip" data-placement="top" title="" data-original-title="Address"></i>
                                                                                                        <span id="address"></span>
                                                                                                    </li>

                                                                                                    <li>
                                                                                                        <b>Any Known Allergies </b>
                                                                                                        <span id="allergies"></span>
                                                                                                    </li>
                                                                                                    <li>
                                                                                                        <b>Remarks </b>
                                                                                                        <span id="note"></span>
                                                                                                    </li>
                                                                                                </ul>
                                                                                            </div><!-- ./col-md-9 -->
                                                                                            <div class="col-md-3 col-sm-3 col-xs-3">
                                                                                                <div class="pull-right">
                                                                                                    <!--<b>Patient Photo </b>-->
                                                                                                    <!--<span id="image"></span>-->

                                                                                                    <img class="modal-profile-user-img img-responsive" src="" id="image" alt="User profile picture">
                                                                                                </div>
                                                                                            </div><!-- ./col-md-3 -->
                                                                                        </div>

                                                                                        <div class="row">
                                                                                            <div class="col-md-12">
                                                                                                <div class="dividerhr"></div>
                                                                                            </div><!--./col-md-12-->
                                                                                            <div class="col-sm-2 col-xs-4">
                                                                                                <div class="form-group">
                                                                                                    <label for="pwd">Height</label>
                                                                                                    <input name="Height" type="text" class="form-control">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-2 col-xs-4">
                                                                                                <div class="form-group">
                                                                                                    <label for="pwd">Weight</label>
                                                                                                    <input name="Weight" type="number" class="form-control">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-2 col-xs-4">
                                                                                                <div class="form-group">
                                                                                                    <label for="pwd">BP</label>
                                                                                                    <input name="Bp" type="number" class="form-control">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-2 col-xs-4">
                                                                                                <div class="form-group">
                                                                                                    <label for="pwd">Pulse</label>
                                                                                                    <input name="Pulse" type="text" class="form-control">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-2 col-xs-4">
                                                                                                <div class="form-group">
                                                                                                    <label for="pwd">Temperature</label>
                                                                                                    <input name="Temperature" type="text" class="form-control">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-2 col-xs-4">
                                                                                                <div class="form-group">
                                                                                                    <label for="pwd">Respiration</label>
                                                                                                    <input name="Respiration" type="text" class="form-control">
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col-sm-3 col-xs-6">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Symptoms Type
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <select class="form-control act" id="SymptomsTypeId" name="SymptomsTypeId">
                                                                                                            <option value="">Select</option>
                                                                                                            <option value="2">General Symptoms</option>
                                                                                                            <option value="3">Uncommon Symptoms</option>
                                                                                                        </select>

                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <input name="rows[]" type="hidden" value="1">
                                                                                            <div class="col-sm-3 col-xs-6">
                                                                                                <label for="exampleInputFile">
                                                                                                    Symptoms Title
                                                                                                </label>

                                                                                                <div>

                                                                                                    <select id="SelectedItemIds" name="SymptomsTitleId" class="form-control" onchange="getsymptoms(this.value)">
                                                                                                        <option></option>
                                                                                                    </select>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col-sm-6 col-xs-12">
                                                                                                <div class="form-group">
                                                                                                    <label>Symptoms Description</label>
                                                                                                    <textarea class="form-control" id="symptoms_description" name="Symptoms"></textarea>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col-sm-12">
                                                                                                <div class="form-group">
                                                                                                    <label for="pwd">Note</label>
                                                                                                    <textarea name="Note" rows="3" class="form-control"></textarea>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div><!--./row-->
                                                                                    </div><!--./col-md-8-->
                                                                                    <div class="col-lg-4 col-md-4 col-sm-4 col-eq ptt10">
                                                                                        <div class="row">
                                                                                            <div class="col-sm-12">
                                                                                                <div class="form-group">
                                                                                                    <label>Appointment Date</label>
                                                                                                    <small style="color:#fc2d42"> *</small>

                                                                                                    <input type="text" class="form-control" id="datetimepicker1" name="AppointmentDate" required="">
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-12">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Case
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <input class="form-control" type="text" name="PCase">
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-6">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Casualty
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <select name="Casualty" id="casualty" class="form-control">
                                                                                                            <option value="Yes">Yes</option>
                                                                                                            <option value="No" selected="">No</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-6">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Old Patient
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <select name="OldPatient" class="form-control">
                                                                                                            <option value="Yes">Yes</option>
                                                                                                            <option value="No" selected="">No</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-6">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        TPA
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <select class="form-control" id="TPA" name="TPA">
                                                                                                            <option value="">Select</option>
                                                                                                            <option value="1">CGHS </option>
                                                                                                        </select>

                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>

                                                                                            <div class="col-sm-6">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Credit Limit ($)
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <input class="form-control" type="text" name="credit_limit" value="20000">
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-6">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Reference
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <input class="form-control" type="text" name="refference">
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-6">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Consultant Doctor<small class="req"> *</small>
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <select class="form-control select2 select2-hidden-accessible" style="width: 100%" id="consultant_doctor" name="consultant_doctor" tabindex="-1" aria-hidden="true">
                                                                                                            <option value="">Select</option>
                                                                                                            <option value="2">Sonia Bush</option>
                                                                                                            <option value="8">Sansa Gomez</option>
                                                                                                            <option value="10">Amit Singh</option>
                                                                                                        </select><span class="select2 select2-container select2-container--default" dir="ltr" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-consultant_doctor-container"><span class="select2-selection__rendered" id="select2-consultant_doctor-container" title="Select">Select</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div class="col-sm-12">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Bed Group
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <select class="form-control" name="bed_group_id" onchange="getBed(this.value)">
                                                                                                            <option value="">Select</option>
                                                                                                            <option value="1">VIP Ward - 1st Floor</option>
                                                                                                            <option value="3">Private Ward - 2nd Floor</option>
                                                                                                            <option value="4">General Ward Male - 3rd Floor</option>
                                                                                                            <option value="5">General Ward Female - 3rd Floor</option>
                                                                                                            <option value="6">ICU - Ground Floor</option>
                                                                                                            <option value="7">NICU - 1st Floor</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>  
                                                                                            <div class="col-sm-12">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Bed Number
                                                                                                    </label><small class="req"> *</small>
                                                                                                    <div>
                                                                                                        <select class="form-control select2 select2-hidden-accessible" style="width: 100%" name="bed_no" id="bed_no" tabindex="-1" aria-hidden="true">
                                                                                                            <option value="">Select</option>

                                                                                                        </select><span class="select2 select2-container select2-container--default" dir="ltr" style="width: 100%;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-bed_no-container"><span class="select2-selection__rendered" id="select2-bed_no-container" title="Select">Select</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div> 
                                                                                            <div class="col-sm-12">
                                                                                                <div class="form-group">
                                                                                                    <label for="exampleInputFile">
                                                                                                        Live Consultation
                                                                                                    </label>
                                                                                                    <div>
                                                                                                        <select name="live_consult" id="live_consult" class="form-control">

                                                                                                            <option value="Yes">Yes</option>
                                                                                                            <option value="No" selected="">No</option>
                                                                                                        </select>
                                                                                                    </div>
                                                                                                    <span class="text-danger"></span>
                                                                                                </div>
                                                                                            </div> 

                                                                                        </div><!--./row-->
                                                                                    </div><!--./col-md-4-->
                                                                                </div><!--./row-->

                                                                                <div class="row" style="float:right">
                                                                                    <div class="box-footer">

                                                                                        <div class="pull-right mrminus8">
                                                                                            <button type="submit" id="formaddbtn" data-loading-text="Processing..." class="btn btn-info pull-right">Save</button>
                                                                                        </div>


                                                                                    </div>
                                                                                </div><!--./row-->
                                                                            </form>
                                                                        </div><!--./col-md-12-->
                                                                    </div><!--./row-->
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>


                                                <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.21.0/moment.min.js" type="text/javascript"></script>
<script src="~/Assets/assets/libs/jquery/dist/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $('#SymptomsTypeId').change(function () {
            $.get("/InPatient/GetSymptomsList", { SympId: $("#SymptomsTypeId").val() }, function (data) {
                $('#StateId').empty();
                $.each(data, function(index, row){
                    $("#StateId").append("<option value='" + row.StateId + "'>" + row.StateName + "</option>")
                });
            });
        });
    });      
</script>
